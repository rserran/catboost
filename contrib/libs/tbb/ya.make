# Generated by devtools/yamaker.

LIBRARY()



VERSION(2020_U3)

LICENSE(Apache-2.0)

ADDINCL(
    GLOBAL contrib/libs/tbb/include
    contrib/libs/tbb
    contrib/libs/tbb/src
    contrib/libs/tbb/src/rml/include
)

NO_COMPILER_WARNINGS()

NO_UTIL()

CFLAGS(
    -DTBB_SUPPRESS_DEPRECATED_MESSAGES=1
    -D__TBB_BUILD=1
)

SRCS(
    src/old/concurrent_queue_v2.cpp
    src/old/concurrent_vector_v2.cpp
    src/old/spin_rw_mutex_v2.cpp
    src/old/task_v2.cpp
    src/rml/client/rml_tbb.cpp
    src/tbb/arena.cpp
    src/tbb/cache_aligned_allocator.cpp
    src/tbb/concurrent_hash_map.cpp
    src/tbb/concurrent_monitor.cpp
    src/tbb/concurrent_queue.cpp
    src/tbb/concurrent_vector.cpp
    src/tbb/condition_variable.cpp
    src/tbb/critical_section.cpp
    src/tbb/dynamic_link.cpp
    src/tbb/governor.cpp
    src/tbb/market.cpp
    src/tbb/mutex.cpp
    src/tbb/observer_proxy.cpp
    src/tbb/pipeline.cpp
    src/tbb/private_server.cpp
    src/tbb/queuing_mutex.cpp
    src/tbb/queuing_rw_mutex.cpp
    src/tbb/reader_writer_lock.cpp
    src/tbb/recursive_mutex.cpp
    src/tbb/scheduler.cpp
    src/tbb/semaphore.cpp
    src/tbb/spin_mutex.cpp
    src/tbb/spin_rw_mutex.cpp
    src/tbb/task.cpp
    src/tbb/task_group_context.cpp
    src/tbb/tbb_main.cpp
    src/tbb/tbb_misc.cpp
    src/tbb/tbb_misc_ex.cpp
    src/tbb/tbb_statistics.cpp
    src/tbb/tbb_thread.cpp
    src/tbb/x86_rtm_rw_mutex.cpp
)

IF (OS_WINDOWS)
    CFLAGS(
        -DUSE_WINTHREAD
    )
ELSE()
    CFLAGS(
        -DUSE_PTHREAD
    )
ENDIF()

IF (GCC)
    CFLAGS(
        -flifetime-dse=1
        -mrtm
    )
ENDIF()

IF (NOT ARCH_ARM64)
    CFLAGS(
        -DDO_ITT_NOTIFY
    )

    SRCS(
        src/tbb/itt_notify.cpp
    )
ENDIF()

END()
